<!DOCTYPE html>
<html lang="ro" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tempo Admin - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: ['class', '[data-theme="dark"]'],
            theme: {
                extend: {
                    colors: {
                        primary: '#4A90E2',
                        secondary: '#F4E8D8',
                    }
                }
            }
        }
    </script>
   <link rel="stylesheet" href="styles.css?v=5">
    <link rel="stylesheet" href="dashboard-styles.css">
    <link rel="stylesheet" href="tailwind-custom.css">
    <link rel="icon" href="icon.png" type="image/png">
    
</head>
<body class="bg-gray-50 dark:bg-gray-900">

    

    <div class="app-container flex flex-col md:flex-row h-screen overflow-hidden" id="appContainer">
        
        <!-- Sidebar -->
        <nav class="sidebar bg-white dark:bg-gray-800 border-b md:border-r border-gray-200 dark:border-gray-700 flex md:flex-col w-full md:w-64 flex-shrink-0">
            <div class="sidebar-header flex items-center justify-center md:justify-center p-4 md:mb-8">
                <img src="logo.png" alt="Tempo Logo" class="logo-full h-8 md:h-10 mb-6">
                <img src="logo.png" alt="Tempo Logo" class="logo-small h-8 hidden mb-6">
            </div>
            <ul class="sidebar-menu flex-col flex-1 overflow-y-auto p-2 md:p-4">
                <li class="menu-item active" data-view="dashboard">
                    <a href="#" class="flex items-center gap-3 px-3 py-2 md:px-4 md:py-3 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>
                        <span class="hidden md:inline">Dashboard</span>
                    </a>
                </li>
                <li class="menu-item" data-view="calendar">
                    <a href="#" class="flex items-center gap-3 px-3 py-2 md:px-4 md:py-3 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/></svg>
                        <span class="hidden md:inline">Calendar</span>
                    </a>
                </li>
                <li class="menu-item" data-view="client">
                    <a href="#" class="flex items-center gap-3 px-3 py-2 md:px-4 md:py-3 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                        <span class="hidden md:inline">Clienti</span>
                    </a>
                </li>
                <li class="menu-item" data-view="team">
                    <a href="#" class="flex items-center gap-3 px-3 py-2 md:px-4 md:py-3 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                        <span class="hidden md:inline">Echipa</span>
                    </a>
                </li>
                <li class="menu-item" data-view="billing">
                    <a href="#" class="flex items-center gap-3 px-3 py-2 md:px-4 md:py-3 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H7"/></svg>
                        <span class="hidden md:inline">Facturare</span>
                    </a>
                </li>
                <li class="menu-item" data-view="eventTypes">
                    <a href="#" class="flex items-center gap-3 px-3 py-2 md:px-4 md:py-3 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                        <span class="hidden md:inline">Servicii</span>
                    </a>
                </li>
                <li class="menu-item" data-view="analytics">
                    <a href="#" class="flex items-center gap-3 px-3 py-2 md:px-4 md:py-3 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></svg>
                        <span class="hidden md:inline">Analytics</span>
                    </a>
                </li>
            </ul>

            

                <div id="sidebarUserBadgeContainer" class="p-2 md:p-4 border-t border-gray-200 dark:border-gray-700">
    </div>
            <div class="p-2 md:p-4 border-t border-gray-200 dark:border-gray-700">
                <button id="sidebarLogoutBtn" class="w-full flex items-center gap-3 px-3 py-2 md:px-4 md:py-3 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors whitespace-nowrap justify-center md:justify-start" title="Deconectare">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    <span class="hidden md:inline">Deconectare</span>
                </button>
            </div>
            

            <div class="sidebar-footer hidden md:flex justify-center gap-2 p-4 border-t border-gray-200 dark:border-gray-700">
                
                
                <button id="fullscreenToggle" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700" title="Ecran complet">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>
                </button>
            </div>
        </nav>
        
        <main class="main-content flex-1 flex flex-col overflow-hidden">
            
            <!-- Dashboard Section -->
            <section id="dashboardSection" class="main-section active flex flex-col h-full">
                <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 md:p-6 flex-shrink-0">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                        <!--- HAMBURGER MENU-->
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                            <div class="header-title-group">
                                <button class="mobile-menu-toggle btn-icon md:hidden">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                </button>
                                <h1  class="text-2xl md:text-3xl font-semibold text-gray-900 dark:text-white">Panou de control</h1>
                            </div>
                            
                            
                        </div>
                        
                        <div class="flex items-center gap-2">

                            <button id="refreshDashboardBtn" class="btn-icon btn-refresh-data" title="Reîmprospătează datele">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                            </button>

                            <button id="addEventBtn" class="btn btn-primary flex items-center gap-2 px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg transition-colors text-sm md:text-base">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                                <span class="hidden sm:inline">Adauga Sesiune</span>
                                <span class="sm:hidden">Adauga</span>
                            </button>
                        </div> 


                        
                    </div>
                </header>

                <div class="flex-1 overflow-y-auto p-4 md:p-6">
                    <!-- Mobile-first Grid: 1 column on mobile, 2 on tablet, 3 on desktop -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        
                        <!-- Programul Zilei - Full width on mobile, spans 2 cols on desktop -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-gray-700 shadow-sm lg:col-span-2">
                            <div class="flex items-center gap-3 pb-4 mb-4 border-b border-gray-200 dark:border-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="text-gray-600 dark:text-gray-400"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>
                                <h2 class="text-lg md:text-xl font-semibold text-gray-900 dark:text-white">Programul Zilei (Dvs.)</h2>
                            </div>
                            <div id="dashboardTodaySchedule" class="space-y-0 max-h-[450px] overflow-y-auto pr-2">
                                <div class="flex gap-4 py-3.5 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                                    <div class="text-sm md:text-base font-semibold text-primary flex-shrink-0 w-24">09:00 - 10:00</div>
                                    <div class="flex-1 min-w-0">
                                        <div class="font-semibold text-gray-900 dark:text-white overflow-hidden text-ellipsis whitespace-nowrap">Terapie - Amalia</div>
                                        <div class="text-sm text-gray-600 dark:text-gray-400">cu Amalia</div>
                                    </div>
                                </div>
                                <div class="flex gap-4 py-3.5 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                                    <div class="text-sm md:text-base font-semibold text-primary flex-shrink-0 w-24">10:00 - 11:00</div>
                                    <div class="flex-1 min-w-0">
                                        <div class="font-semibold text-gray-900 dark:text-white overflow-hidden text-ellipsis whitespace-nowrap">Terapie - Alex</div>
                                        <div class="text-sm text-gray-600 dark:text-gray-400">cu Alex</div>
                                    </div>
                                </div>
                                <div class="flex gap-4 py-3.5 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                                    <div class="text-sm md:text-base font-semibold text-primary flex-shrink-0 w-24">11:00 - 12:00</div>
                                    <div class="flex-1 min-w-0">
                                        <div class="font-semibold text-gray-900 dark:text-white overflow-hidden text-ellipsis whitespace-nowrap">Terapie - Tudor</div>
                                        <div class="text-sm text-gray-600 dark:text-gray-400">cu Tudor</div>
                                    </div>
                                </div>
                                <div class="text-center py-8 text-gray-500 dark:text-gray-400 hidden text-center py-8 text-gray-500 dark:text-gray-400">
                                    <p>Nicio sesiune programată pentru astăzi.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Acțiuni Rapide -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                            <div class="flex items-center gap-3 pb-4 mb-4 border-b border-gray-200 dark:border-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="text-gray-600 dark:text-gray-400"><polyline points="9 18 15 12 9 6"/></svg>
                                <h2 class="text-lg md:text-xl font-semibold text-gray-900 dark:text-white">Acțiuni Rapide</h2>
                            </div>
                            <div class="flex flex-col gap-3">
                                <button class="btn btn-primary w-full flex items-center justify-center gap-2 px-4 py-3 bg-primary hover:bg-blue-600 text-white rounded-lg transition-colors" id="quickAddEventBtn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                                    <span>Adaugă Sesiune</span>
                                </button>
                                <button class="btn btn-secondary w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors" id="quickAddClientBtn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
                                    <span>Adaugă Client Nou</span>
                                </button>
                                <button class="btn btn-secondary w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors" id="quickAddTeamBtn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg>
                                    <span>Adaugă Membru Echipă</span>
                                </button>
                            </div>
                        </div>

                        <!-- Statistici Rapide -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                            <div class="flex items-center gap-3 pb-4 mb-4 border-b border-gray-200 dark:border-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="text-gray-600 dark:text-gray-400"><path d="M12 20V10"/><path d="M18 20V4"/><path d="M6 20V16"/></svg>
                                <h2 class="text-lg md:text-xl font-semibold text-gray-900 dark:text-white">Statistici Rapide</h2>
                            </div>
                            <div id="dashboardQuickStats" class="space-y-0">
                                <div class="flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                                    <span class="text-sm font-medium text-gray-600 dark:text-gray-400">Sesiuni Totale</span>
                                    <span class="text-2xl md:text-3xl font-bold text-primary" id="statTotalSessions">120</span>
                                </div>
                                <div class="flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                                    <span class="text-sm font-medium text-gray-600 dark:text-gray-400">Prezență Centru</span>
                                    <span class="text-2xl md:text-3xl font-bold text-primary" id="statAttendance">95%</span>
                                </div>
                                <div class="flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                                    <span class="text-sm font-medium text-gray-600 dark:text-gray-400">Rapoarte În Așteptare</span>
                                    <span class="text-2xl md:text-3xl font-bold text-primary" id="statPendingReports">3</span>
                                </div>
                            </div>
                        </div>

                        <!-- Activitate Recentă - Full width on mobile, spans 2 cols on desktop -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 border border-gray-200 dark:border-gray-700 shadow-sm lg:col-span-2">
                            <div class="flex items-center gap-3 pb-4 mb-4 border-b border-gray-200 dark:border-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="text-gray-600 dark:text-gray-400"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                                <h2 class="text-lg md:text-xl font-semibold text-gray-900 dark:text-white">Activitate Recentă</h2>
                            </div>
                            <div id="dashboardRecentActivity" class="max-h-[200px] overflow-y-auto pr-2" class="space-y-0 overflow-x-auto">
                                <div class="grid grid-cols-[auto_1fr_auto_auto] items-center gap-3 md:gap-4 py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                                    <div class="w-9 h-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center flex-shrink-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600 dark:text-gray-400"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                                    </div>
                                    <div class="text-sm text-gray-700 dark:text-gray-300 overflow-hidden text-ellipsis whitespace-nowrap">
                                        <strong>Evaluare salvată</strong>: Tudor
                                    </div>
                                    <div class="text-xs md:text-sm text-gray-500 dark:text-gray-400 flex-shrink-0 whitespace-nowrap">acum 45 min</div>
                                    <div class="flex-shrink-0">
                                        <button class="px-3 py-1.5 text-xs md:text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors whitespace-nowrap" data-action="goToClientEvolution" data-client-id="client_1761643441294">Vezi Evoluție</button>
                                    </div>
                                </div>
                                <div class="grid grid-cols-[auto_1fr_auto_auto] items-center gap-3 md:gap-4 py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                                    <div class="w-9 h-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center flex-shrink-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600 dark:text-gray-400"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/></svg>
                                    </div>
                                    <div class="text-sm text-gray-700 dark:text-gray-300 overflow-hidden text-ellipsis whitespace-nowrap">
                                        <strong>Eveniment adăugat</strong>: Terapie - Stefan Negru
                                    </div>
                                    <div class="text-xs md:text-sm text-gray-500 dark:text-gray-400 flex-shrink-0 whitespace-nowrap">acum 2 ore</div>
                                    <div class="flex-shrink-0">
                                        <button class="px-3 py-1.5 text-xs md:text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors whitespace-nowrap" data-action="goToDate" data-date="2025-11-03">Vezi Ziua</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <!-- Calendar Section (placeholder) -->
            <section id="calendarSection" class="main-section hidden">
                <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4 md:p-6">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                        <!--- HAMBURGER MENU-->
                        <div class="flex items-center justify-between w-full md:w-auto gap-4">
                            <div class="header-title-group">
                                <button class="mobile-menu-toggle btn-icon md:hidden">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                </button>
                                <h1 id="currentPeriod" class="text-2xl md:text-3xl font-semibold text-gray-900 dark:text-white">Panou de control</h1>
                            </div>

                            <!-- Calendar Options Toggle (Mobile Only) -->
                            <button id="calendarOptionsToggle" class="btn-icon md:hidden">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="4" x2="4" y1="21" y2="14"></line>
                                    <line x1="4" x2="4" y1="10" y2="3"></line>
                                    <line x1="12" x2="12" y1="21" y2="12"></line>
                                    <line x1="12" x2="12" y1="8" y2="3"></line>
                                    <line x1="20" x2="20" y1="21" y2="16"></line>
                                    <line x1="20" x2="20" y1="12" y2="3"></line>
                                    <line x1="2" x2="6" y1="14" y2="14"></line>
                                    <line x1="10" x2="14" y1="8" y2="8"></line>
                                    <line x1="18" x2="22" y1="16" y2="16"></line>
                                </svg>
                            </button>
                        </div>



                        <div id="calendarControls" class="flex flex-wrap items-center gap-2">
                            <div class="flex items-center gap-1">
                                <button id="prevBtn" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>
                                </button>
                                <button id="todayBtn" class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-sm">Azi</button>
                                <button id="nextBtn" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 18 6-6-6-6"/></svg>
                                </button>
                            </div>
                            <div class="view-toggle flex gap-1 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg">
                                <button class="view-btn active px-3 py-1.5 rounded text-sm" data-view="month">Luna</button>
                                <button class="view-btn px-3 py-1.5 rounded text-sm" data-view="week">Saptamana</button>
                                <button class="view-btn px-3 py-1.5 rounded text-sm" data-view="day">Zi</button>
                            </div>
                            <button id="cloneMonthBtn" class="btn btn-secondary  flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors" title="Clonează programul unei luni în alta (doar admin)">
                                <svg xmlns="http://www.w3.org/2000/svg" class="text-gray-500" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                                <span class="hidden sm:inline text-gray-500">Clonează Lună</span>
                            </button>
                            <button id="addEventBtnCalendar" class="btn btn-primary flex items-center gap-2 px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                                <span class="hidden sm:inline">Adauga</span>
                            </button>
                        </div>



                    </div>
                </header>
                <div id="calendarFilters" class="sm:flex-col  md:flex-row  lg:flex justify-between items-center bg-white border-b border-gray-200">
                    <div id="filters" class="filters-container p-4"></div>
                    <div class="client-filter-container p-6 md:pr-6">
                        <select id="calendarClientFilter" class="form-input calendar-filter-select">
                         <option value="">Toți Clienții</option>
                         </select>
                    </div>
                </div>
                
                
                <div id="calendarView" class="flex-1 overflow-auto p-4"></div>
            </section>

            <section id="clientSection" class="main-section">
        <header class="section-header">
            <!--- HAMBURGER MENU-->
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                            <div class="header-title-group">
                                <button class="mobile-menu-toggle btn-icon md:hidden">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                </button>
                                <h1 class="text-2xl md:text-3xl font-semibold text-gray-900 dark:text-white">Panou de control</h1>
                            </div>
                            
                            
                        </div>
            <div class="header-actions">

                <button id="refreshDashboardBtn" class="btn-icon btn-refresh-data" title="Reîmprospătează datele">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                            </button>

                <button id="addNewClientBtn" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                    <span>Adauga Client Nou</span>
                </button>
            </div>
        </header>
        
        <div class="section-content-grid">
            <div class="section-col-list" style="grid-column: 1 / -1;">
                <input type="search" id="clientSearchBar" class="form-input" placeholder="Cauta client dupa nume, email...">
                <div id="clientsList" class="modal-list">
                    </div>
            </div>
            <div class="section-col-form" style="display: none;">
                <form id="clientForm">
                    <h3 id="clientFormTitle">Adauga Client Nou</h3>
                    <div class="form-group">
                        <label for="clientFullName">Nume Complet</label>
                        <input type="text" id="clientFullName" name="clientFullName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="clientEmail">Email</label>
                        <input type="email" id="clientEmail" name="clientEmail" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="clientPhone">Telefon</label>
                        <input type="tel" id="clientPhone" name="clientPhone" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="clientBirthdayInput">Data Nasterii</label>
                        <input type="date" id="clientBirthdayInput" name="clientBirthdayInput" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="clientMedical">Alergii sau medicatie</label>
                        <textarea id="clientMedical" name="clientMedical" class="form-input" rows="3" placeholder="Notițe medicale, alergii, medicatie curenta..."></textarea>
                    </div>
                    <div class="form-group">
        <label for="clientId">Cod Client (ID)</label>
        <input type="text" id="clientId" name="clientId" class="form-input"
               placeholder="ex: andrei2102"
               pattern="[a-z0-9_]+"
               title="Folosește doar litere mici si cifre">
        <small style="color: var(--text-secondary); font-size: 0.75rem; display: block; margin-top: 0.25rem;">
            Lasă gol pentru generare automată. Folosește format: numeddmm
        </small>
    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="clientIsArchived" name="clientIsArchived" style="margin-right: 0.5rem;">
                            <span>Client arhivat</span>
                        </label>
                        <small style="color: var(--text-secondary); font-size: 0.75rem; display: block; margin-top: 0.25rem;">
                            Clienții arhivați vor fi marcați distinct în listă
                        </small>
                    </div>
                    <div class="modal-footer-form">
                        <button id="deleteClientBtn" type="button" class="btn btn-danger-outline">Sterge</button>
                        <button id="cancelClientBtn" type="button" class="btn btn-secondary">Anuleaza</button>
                        <button type="submit" class="btn btn-primary">Salveaza</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <section id="teamSection" class="main-section">
        <header class="section-header">
            <!--- HAMBURGER MENU-->
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                            <div class="header-title-group">
                                <button class="mobile-menu-toggle btn-icon md:hidden">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                                </button>
                                <h1 class="text-2xl md:text-3xl font-semibold text-gray-900 dark:text-white">Panou de control</h1>
                            </div>
                            
                            
                        </div>
            <div class="header-actions">

                <button id="refreshTeamBtn" class="btn-icon btn-refresh-data" title="Reîmprospătează datele">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                </button>

                <button id="addNewTeamMemberBtn" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                    <span>Adauga Membru Nou</span>
                </button>
            </div>
        </header>

        <div class="section-content-grid">
            <div class="section-col-list" style="grid-column: 1 / -1;">
                <div id="teamMembersList" class="modal-list">
                    </div>
            </div>
            <div class="section-col-form" style="display: none;">
                <form id="teamMemberForm">
                    <h3 id="teamFormTitle">Adauga Membru Nou</h3>
                    <div class="form-group">
                        <label for="memberName">Nume</label>
                        <input type="text" id="memberName" name="memberName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="memberInitials">Initiale (max 3)</label>
                        <input type="text" id="memberInitials" name="memberInitials" class="form-input" required maxlength="3">
                    </div>
                    <div class="form-group">
                        <label for="memberRole">Rol</label>
                        <select id="memberRole" name="memberRole" class="form-input" required>
                            <option value="therapist">Terapeut</option>
                            <option value="coordinator">Coordonator</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="memberColor">Culoare</label>
                        <div class="color-picker-group">
                            <input type="color" id="memberColor" name="memberColor" class="form-input-color" value="#4f46e5">
                            <input type="text" id="memberColorHex" name="memberColorHex" class="form-input" value="#4F46E5" maxlength="7">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="memberPassword">Parolă <span id="passwordLabel" style="opacity: 0.6; font-size: 0.875rem;"></span></label>
                        <input type="password" id="memberPassword" name="memberPassword" class="form-input" placeholder="Introduceți parola">
                        <small id="passwordHelp" style="display: block; margin-top: 0.5rem; opacity: 0.7;"></small>
                    </div>
                    <div class="modal-footer-form">
                        <button id="deleteMemberBtn" type="button" class="btn btn-danger-outline">Sterge</button>
                        <button id="cancelMemberBtn" type="button" class="btn btn-secondary">Anuleaza</button>
                        <button type="submit" class="btn btn-primary">Salveaza</button>
                    </div>
                </form>
            </div>
        </div>
    </section>



    <section id="billingSection" class="main-section">
    <header class="section-header">
        <div class="header-title-group">
            <button class="mobile-menu-toggle btn-icon md:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
            <h1 class="text-2xl md:text-3xl font-semibold text-gray-900 dark:text-white">Facturare</h1>
        </div>
        <div class="header-actions">
            <button id="refreshBillingBtn" class="btn-icon btn-refresh-data" title="Reîmprospătează datele">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
            </button>
            <div class="flex items-center gap-1">
                <button id="billingPrevMonth" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>
                </button>
                <h2 id="billingCurrentMonth" class="px-4 py-2 rounded-lg text-lg font-semibold"></h2>
                <button id="billingNextMonth" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 18 6-6-6-6"/></svg>
                </button>
            </div>
        </div>
    </header>

    <div class="section-content-grid" style="grid-template-columns: 1fr; overflow-y: auto;">
        <div class="section-col-list" style="height: auto;">
            <!-- Discount Thresholds Section -->
            <div id="discountThresholdsSection" class="bg-white dark:bg-gray-800 rounded-xl p-4 md:p-6 mb-6 shadow-md">
                <div id="discountThresholdsHeader" class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-0 mb-0 cursor-pointer">
                    <div class="flex items-center gap-2">
                        <svg id="discountThresholdsToggleIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform duration-200 flex-shrink-0">
                            <path d="m9 18 6-6-6-6"/>
                        </svg>
                        <h3 class="text-base sm:text-lg font-semibold text-gray-900 dark:text-white m-0">Praguri de Discount Automat</h3>
                    </div>
                    <button id="saveDiscountThresholdsBtn" class="btn btn-primary btn-sm hidden self-end sm:self-auto" onclick="event.stopPropagation()">Salvează</button>
                </div>
                <div id="discountThresholdsContent" class="hidden mt-4">
                    <div id="discountThresholdsList" class="flex flex-col gap-3">
                        <!-- Threshold items will be rendered here -->
                    </div>
                    <button id="addDiscountThresholdBtn" class="btn btn-secondary btn-sm mt-3 w-full sm:w-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14m-7-7h14"/></svg>
                        Adaugă Prag
                    </button>
                </div>
            </div>

            <input type="search" id="billingSearchBar" class="form-input mb-6" placeholder="Caută client după nume...">
            <div id="billingClientList" class="modal-list pr-0">
                </div>
        </div>
    </div>
</section>

<div id="paymentModal" class="modal-backdrop modal-small">
    <div class="modal-content">
        <form id="paymentForm">
            <div class="modal-header">
                <h2 id="paymentModalTitle" class="modal-title">Adaugă Încasare</h2>
                <button id="closePaymentModal" type="button" class="btn-icon btn-close" title="Inchide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="paymentClientId">
                <input type="hidden" id="paymentMonthKey">

                <div class="form-group">
                    <label for="paymentDate">Data Încasării</label>
                    <input type="date" id="paymentDate" class="form-input" required>
                </div>

                <div class="form-group">
                    <label for="paymentAmount">Sumă (RON)</label>
                    <input type="number" id="paymentAmount" class="form-input" required min="1" step="1">
                </div>

                <div class="form-group">
                    <label for="paymentNotes">Notițe (Opțional)</label>
                    <input type="text" id="paymentNotes" class="form-input" placeholder="ex: chitanța nr. 123">
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelPaymentBtn" type="button" class="btn btn-secondary">Anulează</button>
                <button type="submit" class="btn btn-primary">Salvează Încasarea</button>
            </div>
        </form>
    </div>
</div>

<!-- Subscription Modal -->
<div id="subscriptionModal" class="modal-backdrop modal-small">
    <div class="modal-content">
        <form id="subscriptionForm">
            <div class="modal-header">
                <h2 id="subscriptionModalTitle" class="modal-title">Adaugă/Modifică Abonament</h2>
                <button id="closeSubscriptionModal" type="button" class="btn-icon btn-close" title="Inchide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="subscriptionClientId">

                <div class="form-group">
                    <label for="subscriptionAmount">Valoare abonament (RON)</label>
                    <input type="number" id="subscriptionAmount" class="form-input" required min="0" step="1" placeholder="ex: 500">
                </div>

                <div id="subscriptionStatus" class="subscription-status" style="display: none;">
                    <span class="status-badge"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelSubscriptionBtn" type="button" class="btn btn-secondary">Anulează</button>
                <button id="deactivateSubscriptionBtn" type="button" class="btn btn-warning" style="display: none;">Dezactivează</button>
                <button id="activateSubscriptionBtn" type="submit" class="btn btn-primary">Activează</button>
            </div>
        </form>
    </div>
</div>

<!-- Intervention Plan Modal -->
<div id="interventionPlanModal" class="modal-backdrop modal-medium">
    <div class="modal-content">
        <form id="interventionPlanForm">
            <div class="modal-header">
                <h2 id="interventionPlanModalTitle" class="modal-title">Plan de Intervenție</h2>
                <button id="closeInterventionPlanModal" type="button" class="btn-icon btn-close" title="Inchide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="interventionPlanClientId">

                <div class="form-group">
                    <label for="interventionPlanClientName">Client</label>
                    <input type="text" id="interventionPlanClientName" class="form-input" readonly style="background-color: #f3f4f6;">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="interventionPlanStartDate">Data Început</label>
                        <input type="date" id="interventionPlanStartDate" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="interventionPlanEndDate">Data Sfârșit</label>
                        <input type="date" id="interventionPlanEndDate" class="form-input" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="interventionPlanPrograms">Programe Selectate</label>
                    <div id="interventionPlanProgramsList" class="programs-checklist">
                        <!-- Programs will be populated here -->
                    </div>
                </div>

                <div class="form-group">
                    <label for="interventionPlanNotes">Notițe (Opțional)</label>
                    <textarea id="interventionPlanNotes" class="form-input" rows="4" placeholder="Adaugă notițe despre planul de intervenție..."></textarea>
                </div>

                <div id="interventionPlanInfo" class="intervention-plan-info" style="display: none;">
                    <div class="info-row">
                        <span class="label">Creat la:</span>
                        <span id="interventionPlanCreatedAt"></span>
                    </div>
                    <div class="info-row">
                        <span class="label">Ultima actualizare:</span>
                        <span id="interventionPlanUpdatedAt"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelInterventionPlanBtn" type="button" class="btn btn-secondary">Anulează</button>
                <button id="deleteInterventionPlanBtn" type="button" class="btn btn-danger" style="display: none;">Șterge Plan</button>
                <button type="submit" class="btn btn-primary">Salvează Plan</button>
            </div>
        </form>
    </div>
</div>

    <!-- Event Types Section -->
    <section id="eventTypesSection" class="main-section">
        <header class="section-header">
            <div class="header-title-group">
                <button class="mobile-menu-toggle btn-icon md:hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
                <h1 class="text-2xl md:text-3xl font-semibold text-gray-900 dark:text-white">Servicii</h1>
            </div>
            <div class="header-actions">
                <button id="addEventTypeBtn" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14m-7-7h14"/></svg>
                    
                </button>
            </div>
        </header>

        <div class="section-content-grid" style="grid-template-columns: 1fr; overflow-y: auto;">
            <div class="section-col-list" style="height: auto; overflow: visible;">
                <input type="search" id="eventTypeSearchBar" class="form-input" placeholder="Caută după nume..." style="margin-bottom: 1.5rem;">
                
                
                <div id="eventTypesList" class="space-y-4">
                    <!-- Event types will be rendered here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Analytics Section -->
    <section id="analyticsSection" class="main-section">
        <header class="section-header">
            <div class="header-title-group">
                <button class="mobile-menu-toggle btn-icon md:hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
                <h1 class="text-2xl md:text-3xl font-semibold text-gray-900 dark:text-white">Panou Analitic</h1>
            </div>
            <div class="header-actions flex items-center gap-2">
                <select id="analyticsMonths" class="form-input text-sm" style="width: auto;">
                    <option value="3">Ultimele 3 luni</option>
                    <option value="6" selected>Ultimele 6 luni</option>
                    <option value="12">Ultimul an</option>
                </select>
                <button id="refreshAnalyticsBtn" class="btn-icon" title="Reimprospateaza datele">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                </button>
            </div>
        </header>

        <div class="section-content p-4 md:p-6 overflow-y-auto">
            <!-- Loading Overlay -->
            <div id="analyticsLoading" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow-xl">
                    <div class="flex items-center gap-3">
                        <svg class="animate-spin h-8 w-8 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span class="text-lg font-medium text-gray-900 dark:text-white">Se incarca datele...</span>
                    </div>
                </div>
            </div>

            <!-- Analytics Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

                <!-- Financials Chart -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Financiar</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Total Facturat vs. Total Incasat</p>
                    </div>
                    <div class="relative" style="height: 300px;">
                        <canvas id="financialsChart"></canvas>
                    </div>
                </div>

                <!-- Therapist Utilization Chart -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Operatiuni</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Rata de Utilizare Terapeuti</p>
                    </div>
                    <div class="relative" style="height: 300px;">
                        <canvas id="utilizationChart"></canvas>
                    </div>
                </div>

                <!-- Attendance Chart -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Statistici Clienti</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Prezenta Generala</p>
                    </div>
                    <div class="relative" style="height: 300px;">
                        <canvas id="attendanceChart"></canvas>
                    </div>
                </div>

                <!-- Services Chart -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Statistici Servicii</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Servicii Populare si Profitabile</p>
                    </div>
                    <div class="relative" style="height: 300px;">
                        <canvas id="servicesChart"></canvas>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Event Type Modal -->
    <div id="eventTypeModal" class="modal-backdrop modal-small">
        <div class="modal-content">
            <form id="eventTypeForm">
                <div class="modal-header">
                    <h2 id="eventTypeModalTitle" class="modal-title">Adaugă Tip Eveniment</h2>
                    <button id="closeEventTypeModal" type="button" class="btn-icon btn-close" title="Închide">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="eventTypeOriginalId">
                    
                    <div class="form-group">
                        <label for="eventTypeId">ID Tip <span class="text-red-500">*</span></label>
                        <input type="text" id="eventTypeId" class="form-input" required pattern="[a-z0-9-]+" placeholder="ex: terapie-speciala" title="Doar litere mici, cifre și liniuță">
                        <small class="text-gray-500">Doar litere mici, cifre și liniuță (-). Nu se poate schimba după creare.</small>
                    </div>

                    <div class="form-group">
                        <label for="eventTypeLabel">Denumire <span class="text-red-500">*</span></label>
                        <input type="text" id="eventTypeLabel" class="form-input" required placeholder="ex: Terapie Specială">
                    </div>

                    <div class="form-group">
                        <label for="eventTypePrice">Preț de Bază (RON)</label>
                        <input type="number" id="eventTypePrice" class="form-input" placeholder="ex: 100" min="0" step="1">
                        <small class="text-gray-500">Setați 0 dacă prețul este variabil sau nu se aplică.</small>
                    </div>

                    <div class="form-group">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" id="eventTypeIsBillable" class="form-checkbox" checked>
                            <span>Eveniment facturabil</span>
                        </label>
                        <small class="text-gray-500 block mt-1">Dacă este bifat, evenimentele de acest tip vor fi facturabile implicit.</small>
                    </div>

                    <div class="form-group">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" id="eventTypeRequiresTime" class="form-checkbox" checked>
                            <span>Necesită oră și durată</span>
                        </label>
                        <small class="text-gray-500 block mt-1">Dacă este bifat, va fi obligatoriu să specifici ora și durata la crearea evenimentelor.</small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="cancelEventTypeBtn" type="button" class="btn btn-secondary">Anulează</button>
                    <button id="deleteEventTypeBtn" type="button" class="btn btn-danger" style="display: none;">Șterge</button>
                    <button type="submit" class="btn btn-primary">Salvează</button>
                </div>
            </form>
        </div>
    </div>
            
        </main>
    </div>
    
    <div id="eventDetailsModal" class="modal-backdrop">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2 id="eventDetailsTitle" class="modal-title">Detalii Eveniment</h2>
                <button id="closeEventDetailsModal" class="btn-icon btn-close" title="Inchide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <div id="eventDetailsContent">
                    </div>
                
                <div class="event-details-section">
                    <h3>Comentarii (Private)</h3>
                    <textarea id="eventComments" class="form-input" placeholder="Adauga notite private despre eveniment..."></textarea>
                </div>
            </div>
            <div class="modal-footer justify-between">
                <div>
                    <button id="deleteEventFromDetails" class="btn btn-danger-outline">Sterge</button>
                </div>
                <div>
                    <button id="closeEventDetails" class="btn btn-secondary">Inchide</button>
                    <button id="editEventFromDetails" class="btn btn-primary">Editeaza</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="eventModal" class="modal-backdrop">
        <div class="modal-content modal-xl">
            <form id="eventForm">
                <div class="modal-header">
                    <h2 id="modalTitle" class="modal-title">Adauga/Editeaza Eveniment</h2>
                    <button id="closeModal" type="button" class="btn-icon btn-close" title="Inchide">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                    </button>
                </div>

                <!-- Step Indicator (only visible in create mode) -->
                <div id="stepIndicator" class="step-indicator" style="display: none;">
                    <div class="step-item active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">Detalii</div>
                    </div>
                    <div class="step-item" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">Echipa</div>
                    </div>
                    <div class="step-item" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">Clienți</div>
                    </div>
                    <div class="step-item" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-label">Programe</div>
                    </div>
                    <div class="step-item" data-step="5">
                        <div class="step-number">5</div>
                        <div class="step-label">Opțiuni</div>
                    </div>
                </div>

                <div class="modal-body" id="eventModalBody">

                    <!-- Step 1: Detalii -->
                    <div class="wizard-step" data-step="1">
                        <h3>Detalii Eveniment</h3>

                        <div class="form-group">
                            <label for="eventName">Nume Eveniment</label>
                            <input type="text" id="eventName" name="eventName" class="form-input" required>
                        </div>

                        <div class="form-group">
                            <label for="eventDetails">Detalii Eveniment (Optionale)</label>
                            <textarea id="eventDetails" name="eventDetails" class="form-input" rows="3"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="eventType">Tip Eveniment</label>
                            <select id="eventType" name="eventType" class="form-input" required>
                                <option value="">Se încarcă...</option>
                            </select>
                        </div>

                        <div class="form-grid-2">
                            <div class="form-group">
                                <label for="eventDate">Data</label>
                                <input type="date" id="eventDate" name="eventDate" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="startTime">Ora Inceput</label>
                                <select id="startTime" name="startTime" class="form-input" required>
                                    <option value="08:00">08:00</option>
                                    <option value="08:30">08:30</option>
                                    <option value="09:00">09:00</option>
                                    <option value="09:30">09:30</option>
                                    <option value="10:00">10:00</option>
                                    <option value="10:30">10:30</option>
                                    <option value="11:00">11:00</option>
                                    <option value="11:30">11:30</option>
                                    <option value="12:00">12:00</option>
                                    <option value="12:30">12:30</option>
                                    <option value="13:00">13:00</option>
                                    <option value="13:30">13:30</option>
                                    <option value="14:00">14:00</option>
                                    <option value="14:30">14:30</option>
                                    <option value="15:00">15:00</option>
                                    <option value="15:30">15:30</option>
                                    <option value="16:00">16:00</option>
                                    <option value="16:30">16:30</option>
                                    <option value="17:00">17:00</option>
                                    <option value="17:30">17:30</option>
                                    <option value="18:00">18:00</option>
                                    <option value="18:30">18:30</option>
                                    <option value="19:00">19:00</option>
                                    <option value="19:30">19:30</option>
                                    <option value="20:00">20:00</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="duration">Durata (minute)</label>
                                <input type="number" id="duration" name="duration" class="form-input" value="60" step="15" min="15" required>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Echipa -->
                    <div class="wizard-step" data-step="2" style="display: none;">
                        <h3>Echipa (Terapeuti)</h3>
                        <div class="form-group">
                            <label>Selecteaza membrii echipei</label>
                        </div>
                        <div id="teamMemberCheckboxes" class="checkbox-list"></div>
                    </div>

                    <!-- Step 3: Clienți -->
                    <div class="wizard-step" data-step="3" style="display: none;">
                        <h3>Clienti</h3>
                        <div class="form-group">
                            <input type="search" id="clientSearch" class="form-input" placeholder="Cauta client...">
                        </div>
                        <div id="clientCheckboxes" class="checkbox-list"></div>
                        <button type="button" id="addNewClientBtnInModal" class="btn btn-secondary btn-full-width">Adauga Client Nou</button>
                    </div>

                    <!-- Step 4: Programe -->
                    <div class="wizard-step" data-step="4" style="display: none;">
                        <h3>Programe</h3>
                        <div class="form-group">
                            <input type="search" id="programSearch" class="form-input" placeholder="Cauta program...">
                        </div>
                        <div id="programCheckboxes" class="checkbox-list program-list"></div>
                    </div>

                    <!-- Step 5: Opțiuni -->
                    <div class="wizard-step" data-step="5" style="display: none;">
                        <h3>Opțiuni Eveniment</h3>

                        <div class="form-group">
                            <label>Recurenta (in aceasta luna)</label>
                            <div class="repeating-days">
                                <input type="checkbox" id="repeatMon" name="repeatMon" value="1"><label for="repeatMon">L</label>
                                <input type="checkbox" id="repeatTue" name="repeatTue" value="2"><label for="repeatTue">M</label>
                                <input type="checkbox" id="repeatWed" name="repeatWed" value="3"><label for="repeatWed">M</label>
                                <input type="checkbox" id="repeatThu" name="repeatThu" value="4"><label for="repeatThu">J</label>
                                <input type="checkbox" id="repeatFri" name="repeatFri" value="5"><label for="repeatFri">V</label>
                            </div>
                        </div>

                        <div class="form-group-checkboxes">
                            <div class="checkbox-item">
                                <input type="checkbox" id="isPublic" name="isPublic">
                                <label for="isPublic">Eveniment public (vizibil in calendarul public)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="isBillable" name="isBillable" checked>
                                <label for="isBillable">Facturabil</label>
                            </div>
                        </div>
                    </div>

                </div>
                
                <!-- Footer for Wizard Mode (Create) -->
                <div class="modal-footer justify-between" id="wizardFooter" style="display: none;">
                    <div>
                        <button id="wizardPrevBtn" type="button" class="btn btn-secondary" style="display: none;">Inapoi</button>
                    </div>
                    <div>
                        <button id="cancelBtn" type="button" class="btn btn-secondary">Anuleaza</button>
                        <button id="wizardNextBtn" type="button" class="btn btn-primary">Urmatorul</button>
                        <button id="wizardFinishBtn" type="submit" class="btn btn-primary" style="display: none;">Salveaza Eveniment</button>
                    </div>
                </div>

                <!-- Footer for Edit Mode -->
                <div class="modal-footer justify-between" id="editFooter">
                    <div>
                        <button id="deleteBtn" type="button" class="btn btn-danger-outline">Sterge Eveniment</button>
                    </div>
                    <div>
                        <button id="cancelBtnEdit" type="button" class="btn btn-secondary">Anuleaza</button>
                        <button type="submit" class="btn btn-primary">Salveaza Eveniment</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    
    
    
    
    <div id="evolutionModal" class="modal-backdrop">
        <div class="modal-content modal-xl">
            <div class="modal-header">
                <h2 id="evolutionTitle" class="modal-title">Evolutie Client</h2>
                <button id="closeEvolutionModal" class="btn-icon btn-close" title="Inchide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <button class="tab-button active" data-tab="tabGrafice">Grafice Evolutie</button>
                    <button class="tab-button" data-tab="tabEvaluare">Adauga Evaluare</button>
                    <button class="tab-button" data-tab="tabPrograme">Istoric Programe</button>
                    <button class="tab-button" data-tab="tabNotite">Notițe Private</button>
                    <button class="tab-button" data-tab="tabTemaLunara">Temă Lunară</button>
                </div>

                <div id="tabTemaLunara" class="tab-content">
                    <div class="monthly-theme-form">
                        <h3>Adaugă Temă pentru Luna Curentă</h3>
                        <div class="form-group">
                            <label for="monthlyThemeMonth">Selectează Luna</label>
                            <input type="month" id="monthlyThemeMonth" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="monthlyThemeText">Tema Lunară</label>
                            <textarea id="monthlyThemeText" class="form-input" rows="4" placeholder="Introduceți tema pentru această lună..."></textarea>
                        </div>
                        <div class="modal-footer" style="justify-content: flex-end;">
                            <button id="saveMonthlyThemeBtn" type="button" class="btn btn-primary">Salvează Tema</button>
                        </div>
                    </div>
                    
                    <div class="monthly-theme-history">
                        <h3>Istoric Teme Lunare</h3>
                        <div id="monthlyThemeHistoryContainer">
                            <!-- Monthly themes will be rendered here -->
                        </div>
                    </div>
                </div>
                
                <div id="tabGrafice" class="tab-content active">
                    <!-- Evaluation Type Switcher -->
                    <div class="evaluation-type-switcher" style="margin-bottom: 1rem; display: flex; gap: 0.5rem; justify-content: center;">
                        <button id="showPortageChart" class="btn btn-secondary active" data-eval-type="portage">Portage</button>
                        <button id="showABLLSChart" class="btn btn-secondary" data-eval-type="ablls">ABLLS-R</button>
                    </div>

                    <div id="evolutionChartContainer" class="chart-container">
                        <canvas id="evolutionChart"></canvas>
                        </div>
                    <div id="evolutionSummary">
                        </div>
                    <div id="evolutionEditor" style="display:none;">
                        <table class="form-table">
                            <thead>
                                <tr>
                                    <th>Test</th>
                                    <th>1m</th>
                                    <th>3m</th>
                                    <th>6m</th>
                                    <th>9m</th>
                                    <th>12m</th>
                                </tr>
                            </thead>
                            <tbody id="evolutionEditRows"></tbody>
                        </table>
                        <div class="modal-footer">
                            <button id="cancelEvolutionEdit" class="btn btn-secondary">Anuleaza</button>
                            <button id="saveEvolutionBtn" class="btn btn-primary">Salveaza Scoruri</button>
                        </div>
                    </div>
                </div>

                <div id="tabPrograme" class="tab-content">
                    <div id="programHistoryContainer">
                        </div>
                </div>

                <div id="tabNotite" class="tab-content">
                <div id="privateNotesContainer" class="private-notes-container">
                    </div>
            </div>

                <div id="tabEvaluare" class="tab-content">
                    <form id="addEvaluationForm">
                        <div class="form-grid-3">
                            <div class="form-group">
                                <label for="childBirthDateInput">Data Nasterii Client</label>
                                <input type="date" id="childBirthDateInput" class="form-input">
                            </div>
                            <div class="form-group">
                                <label for="evaluationDateInput">Data Evaluarii</label>
                                <input type="date" id="evaluationDateInput" class="form-input">
                            </div>
                            <div class="form-group">
                                <label>Varsta Curenta</label>
                                <div id="childAgeDisplay" class="form-input-static">–</div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="evaluationTypeSelect">Tip evaluare</label>
                            <select id="evaluationTypeSelect" class="form-input">
                                <option value="portage" selected>Portage</option>
                                <option value="logopedica">Evaluare logopedică</option>
                                <option value="ablls">ABLLS-R</option>
                            </select>
                        </div>
                        
                        <div id="portageFormContainer">
                            <div id="portageDomainsContainer">
                                </div>
                        </div>

                        <div id="logopedicaFormContainer" style="display: none;">
                            
                            <div class="logopedica-table-container">
                                <table class="logopedica-table">
                                    <thead>
                                        <tr>
                                            <th>Sunet</th>
                                            <th>Poziție Inițială</th>
                                            <th>Poziție Mediană</th>
                                            <th>Poziție Finală</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>A</td>
                                            <td>
                                                <span class="logo-example-text">arici</span>
                                                <input type="text" class="logo-input" id="logo_A_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">vaca</span>
                                                <input type="text" class="logo-input" id="logo_A_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">perdea</span>
                                                <input type="text" class="logo-input" id="logo_A_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>O</td>
                                            <td>
                                                <span class="logo-example-text">olita</span>
                                                <input type="text" class="logo-input" id="logo_O_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">foc</span>
                                                <input type="text" class="logo-input" id="logo_O_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">radio</span>
                                                <input type="text" class="logo-input" id="logo_O_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>U</td>
                                            <td>
                                                <span class="logo-example-text">umbrela</span>
                                                <input type="text" class="logo-input" id="logo_U_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">pui</span>
                                                <input type="text" class="logo-input" id="logo_U_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">cadou</span>
                                                <input type="text" class="logo-input" id="logo_U_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>E</td>
                                            <td>
                                                <span class="logo-example-text">elefant</span>
                                                <input type="text" class="logo-input" id="logo_E_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">peste</span>
                                                <input type="text" class="logo-input" id="logo_E_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">rosie</span>
                                                <input type="text" class="logo-input" id="logo_E_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>I</td>
                                            <td>
                                                <span class="logo-example-text">iepure</span>
                                                <input type="text" class="logo-input" id="logo_I_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">lingura</span>
                                                <input type="text" class="logo-input" id="logo_I_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">ardei</span>
                                                <input type="text" class="logo-input" id="logo_I_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Ă</td>
                                            <td>
                                                <span class="logo-example-text">ăla, ăsta (pe care ursulet il vrei?)</span>
                                                <input type="text" class="logo-input" id="logo_Ah_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">mănuși</span>
                                                <input type="text" class="logo-input" id="logo_Ah_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">casă</span>
                                                <input type="text" class="logo-input" id="logo_Ah_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Â/Î</td>
                                            <td>
                                                <span class="logo-example-text">îngeraș</span>
                                                <input type="text" class="logo-input" id="logo_hA_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">pâine</span>
                                                <input type="text" class="logo-input" id="logo_hA_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">a coborî (Daca nu e a urca e...)</span>
                                                <input type="text" class="logo-input" id="logo_hA_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>P</td>
                                            <td>
                                                <span class="logo-example-text">pară</span>
                                                <input type="text" class="logo-input" id="logo_P_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">șarpe</span>
                                                <input type="text" class="logo-input" id="logo_P_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">dulap</span>
                                                <input type="text" class="logo-input" id="logo_P_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>B</td>
                                            <td>
                                                <span class="logo-example-text">balon</span>
                                                <input type="text" class="logo-input" id="logo_B_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">albină</span>
                                                <input type="text" class="logo-input" id="logo_B_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">cerb</span>
                                                <input type="text" class="logo-input" id="logo_B_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>M</td>
                                            <td>
                                                <span class="logo-example-text">mașină</span>
                                                <input type="text" class="logo-input" id="logo_M_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">bomboană</span>
                                                <input type="text" class="logo-input" id="logo_M_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">pom</span>
                                                <input type="text" class="logo-input" id="logo_M_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>T</td>
                                            <td>
                                                <span class="logo-example-text">tobă</span>
                                                <input type="text" class="logo-input" id="logo_T_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">autobuz</span>
                                                <input type="text" class="logo-input" id="logo_T_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">pat</span>
                                                <input type="text" class="logo-input" id="logo_T_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>D</td>
                                            <td>
                                                <span class="logo-example-text">dinozaur</span>
                                                <input type="text" class="logo-input" id="logo_D_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">crocodil</span>
                                                <input type="text" class="logo-input" id="logo_D_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">brad</span>
                                                <input type="text" class="logo-input" id="logo_D_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>N</td>
                                            <td>
                                                <span class="logo-example-text">nor</span>
                                                <input type="text" class="logo-input" id="logo_N_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">cană</span>
                                                <input type="text" class="logo-input" id="logo_N_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">scaun</span>
                                                <input type="text" class="logo-input" id="logo_N_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>L</td>
                                            <td>
                                                <span class="logo-example-text">leu</span>
                                                <input type="text" class="logo-input" id="logo_L_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">melc</span>
                                                <input type="text" class="logo-input" id="logo_L_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">cal</span>
                                                <input type="text" class="logo-input" id="logo_L_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>F</td>
                                            <td>
                                                <span class="logo-example-text">floare</span>
                                                <input type="text" class="logo-input" id="logo_F_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">telefon</span>
                                                <input type="text" class="logo-input" id="logo_F_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">cartof</span>
                                                <input type="text" class="logo-input" id="logo_F_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>V</td>
                                            <td>
                                                <span class="logo-example-text">vapor</span>
                                                <input type="text" class="logo-input" id="logo_V_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">avion</span>
                                                <input type="text" class="logo-input" id="logo_V_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">morcov</span>
                                                <input type="text" class="logo-input" id="logo_V_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>S</td>
                                            <td>
                                                <span class="logo-example-text">sanie</span>
                                                <input type="text" class="logo-input" id="logo_S_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">pisică</span>
                                                <input type="text" class="logo-input" id="logo_S_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">urs</span>
                                                <input type="text" class="logo-input" id="logo_S_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Z</td>
                                            <td>
                                                <span class="logo-example-text">zebră</span>
                                                <input type="text" class="logo-input" id="logo_Z_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">frunză</span>
                                                <input type="text" class="logo-input" id="logo_Z_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">autobuz</span>
                                                <input type="text" class="logo-input" id="logo_Z_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Ț</td>
                                            <td>
                                                <span class="logo-example-text">țap</span>
                                                <input type="text" class="logo-input" id="logo_Tz_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">maimuță</span>
                                                <input type="text" class="logo-input" id="logo_Tz_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">căluț-leagăn</span>
                                                <input type="text" class="logo-input" id="logo_Tz_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Ș</td>
                                            <td>
                                                <span class="logo-example-text">șervețel</span>
                                                <input type="text" class="logo-input" id="logo_Sz_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">ușă</span>
                                                <input type="text" class="logo-input" id="logo_Sz_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">cocoș</span>
                                                <input type="text" class="logo-input" id="logo_Sz_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>J</td>
                                            <td>
                                                <span class="logo-example-text">jucării</span>
                                                <input type="text" class="logo-input" id="logo_J_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">păianjen</span>
                                                <input type="text" class="logo-input" id="logo_J_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">ruj</span>
                                                <input type="text" class="logo-input" id="logo_J_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>C</td>
                                            <td>
                                                <span class="logo-example-text">câine</span>
                                                <input type="text" class="logo-input" id="logo_C_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">muscă</span>
                                                <input type="text" class="logo-input" id="logo_C_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">porc</span>
                                                <input type="text" class="logo-input" id="logo_C_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>G</td>
                                            <td>
                                                <span class="logo-example-text">găină</span>
                                                <input type="text" class="logo-input" id="logo_G_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">papagal</span>
                                                <input type="text" class="logo-input" id="logo_G_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">steag</span>
                                                <input type="text" class="logo-input" id="logo_G_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>H</td>
                                            <td>
                                                <span class="logo-example-text">hipopotam</span>
                                                <input type="text" class="logo-input" id="logo_H_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">pahar</span>
                                                <input type="text" class="logo-input" id="logo_H_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">șah</span>
                                                <input type="text" class="logo-input" id="logo_H_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>R</td>
                                            <td>
                                                <span class="logo-example-text">rață</span>
                                                <input type="text" class="logo-input" id="logo_R_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">carte</span>
                                                <input type="text" class="logo-input" id="logo_R_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">fular</span>
                                                <input type="text" class="logo-input" id="logo_R_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>X</td>
                                            <td>
                                                <span class="logo-example-text">xilofon</span>
                                                <input type="text" class="logo-input" id="logo_X_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">boxer</span>
                                                <input type="text" class="logo-input" id="logo_X_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">pix</span>
                                                <input type="text" class="logo-input" id="logo_X_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ce</td>
                                            <td>
                                                <span class="logo-example-text">ceas</span>
                                                <input type="text" class="logo-input" id="logo_CE_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">rinocer</span>
                                                <input type="text" class="logo-input" id="logo_CE_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">șoarece</span>
                                                <input type="text" class="logo-input" id="logo_CE_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ci</td>
                                            <td>
                                                <span class="logo-example-text">citește</span>
                                                <input type="text" class="logo-input" id="logo_CI_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">bicicletă</span>
                                                <input type="text" class="logo-input" id="logo_CI_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">papuci</span>
                                                <input type="text" class="logo-input" id="logo_CI_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ge</td>
                                            <td>
                                                <span class="logo-example-text">geam</span>
                                                <input type="text" class="logo-input" id="logo_GE_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">deget</span>
                                                <input type="text" class="logo-input" id="logo_GE_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">minge</span>
                                                <input type="text" class="logo-input" id="logo_GE_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>gi</td>
                                            <td>
                                                <span class="logo-example-text">girafă</span>
                                                <input type="text" class="logo-input" id="logo_GI_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">frigider</span>
                                                <input type="text" class="logo-input" id="logo_GI_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">covrigi</span>
                                                <input type="text" class="logo-input" id="logo_GI_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>che</td>
                                            <td>
                                                <span class="logo-example-text">cheie</span>
                                                <input type="text" class="logo-input" id="logo_CHE_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">ochelari</span>
                                                <input type="text" class="logo-input" id="logo_CHE_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">ridiche</span>
                                                <input type="text" class="logo-input" id="logo_CHE_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>chi</td>
                                            <td>
                                                <span class="logo-example-text">chibrituri</span>
                                                <input type="text" class="logo-input" id="logo_CHI_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">rochie</span>
                                                <input type="text" class="logo-input" id="logo_CHI_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">ochi</span>
                                                <input type="text" class="logo-input" id="logo_CHI_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ghe</td>
                                            <td>
                                                <span class="logo-example-text">ghete</span>
                                                <input type="text" class="logo-input" id="logo_GHE_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">înghețată</span>
                                                <input type="text" class="logo-input" id="logo_GHE_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">Gheorghe (Cum il cheama pe baietel? Gheor...?)</span>
                                                <input type="text" class="logo-input" id="logo_GHE_fin">
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>ghi</td>
                                            <td>
                                                <span class="logo-example-text">ghiozdan</span>
                                                <input type="text" class="logo-input" id="logo_GHI_init">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">unghie</span>
                                                <input type="text" class="logo-input" id="logo_GHI_med">
                                            </td>
                                            <td>
                                                <span class="logo-example-text">triunghi</span>
                                                <input type="text" class="logo-input" id="logo_GHI_fin">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="form-group" style="margin-top: 1.5rem;">
                                <label for="logoComentarii">Comentarii Evaluare Logopedică</label>
                                <textarea id="logoComentarii" class="form-input" rows="4" placeholder="Observații suplimentare..."></textarea>
                            </div>
                        </div>

                        <div id="abllsFormContainer" style="display: none;">
                            <div id="abllsDomainsContainer">
                                <!-- ABLLS-R domains will be dynamically rendered here -->
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button id="cancelEvaluationBtn" type="button" class="btn btn-secondary">Anuleaza</button>
                            <button id="saveEvaluationBtn" type="button" class="btn btn-primary">Salveaza Evaluarea</button>
                        </div>
                    </form>
                </div>
                
            </div>
        </div>
    </div>
    
    <div id="alertModal" class="modal-backdrop modal-small">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="alertModalTitle" class="modal-title">Notificare</h2>
                <button id="closeAlertModal" class="btn-icon btn-close" title="Inchide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <p id="alertModalMessage">Mesaj...</p>
            </div>
            <div class="modal-footer">
                <button id="alertModalOk" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <div id="subscriberErrorModal" class="modal-backdrop modal-small" style="z-index: 10000;">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #dc2626;">
                <h2 class="modal-title" style="color: white;">Eroare de verificare</h2>
            </div>
            <div class="modal-body" style="text-align: center; padding: 2rem;">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#dc2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 1rem auto;"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                <p style="font-size: 1.1rem; font-weight: 500;">Probleme cu conexiune baza de date! Contactati echipa tempo.</p>
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modal-backdrop modal-small">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="confirmModalTitle" class="modal-title">Confirma actiunea</h2>
                <button id="closeConfirmModal" class="btn-icon btn-close" title="Inchide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <p id="confirmModalMessage">Esti sigur?</p>
            </div>
            <div class="modal-footer">
                <button id="confirmModalCancel" class="btn btn-secondary">Anuleaza</button>
                <button id="confirmModalOk" class="btn btn-danger">Confirma</button>
            </div>
        </div>
    </div>

    <div id="recurringDeleteModal" class="modal-backdrop modal-small">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="recurringDeleteModalTitle" class="modal-title">Stergere Eveniment Recurent</h2>
                <button id="closeRecurringDeleteModal" class="btn-icon btn-close" title="Inchide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <p id="recurringDeleteModalMessage">Acesta este un eveniment recurent. Ce doresti sa stergi?</p>
            </div>
            <div class="modal-footer column-footer">
                <button id="recurringDeleteSingle" class="btn btn-primary">Doar acest eveniment</button>
                <button id="recurringDeleteAll" class="btn btn-danger-outline">Toate evenimentele (din aceasta luna)</button>
                <button id="recurringDeleteCancel" class="btn btn-secondary">Anuleaza</button>
            </div>
        </div>
    </div>

    <div id="recurringEditModal" class="modal-backdrop modal-small">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="recurringEditModalTitle" class="modal-title">Editare Eveniment Recurent</h2>
                <button id="closeRecurringEditModal" class="btn-icon btn-close" title="Inchide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <p id="recurringEditModalMessage">Acesta este un eveniment recurent. Ce dorești să editezi?</p>
            </div>
            <div class="modal-footer column-footer">
                <button id="recurringEditSingle" class="btn btn-primary">Doar acest eveniment</button>
                <button id="recurringEditAll" class="btn btn-secondary">Toate evenimentele din serie</button>
                <button id="recurringEditCancel" class="btn btn-secondary">Anulează</button>
            </div>
        </div>
    </div>

    <!-- Overlap Warning Modal -->
    <div id="overlapWarningModal" class="modal-backdrop modal-small">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="overlapWarningModalTitle" class="modal-title">Avertisment Suprapunere Evenimente</h2>
                <button id="closeOverlapWarningModal" class="btn-icon btn-close" title="Închide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <p id="overlapWarningMessage">Există deja un eveniment în acest interval!</p>
                <div id="overlappingEventsList" class="overlapping-events-list"></div>
                <p class="warning-text"><strong>Ești sigur că vrei să adaugi un alt eveniment?</strong></p>
                <p class="info-text">Evenimentele se vor suprapune și vor fi adăugate separat la facturare.</p>
            </div>
            <div class="modal-footer">
                <button id="overlapWarningConfirm" class="btn btn-primary">Da, adaugă oricum</button>
                <button id="overlapWarningCancel" class="btn btn-secondary">Anulează</button>
            </div>
        </div>
    </div>

    <!-- Clone Month Modal -->
    <div id="cloneMonthModal" class="modal-backdrop modal-small">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Gestionare Program Lunar</h2>
                <button id="closeCloneMonthModal" class="btn-icon btn-close" title="Închide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <!-- Clone Section -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-3 text-gray-900 dark:text-white">Clonează Program</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">Selectează luna sursă și luna țintă pentru a clona programul.</p>
                    <div class="form-group mb-4">
                        <label for="cloneSourceMonth" class="form-label">Luna Sursă:</label>
                        <input type="month" id="cloneSourceMonth" class="form-input" required>
                        <p class="text-sm text-gray-500 mt-1">Luna din care se va copia programul</p>
                    </div>
                    <div class="form-group mb-4">
                        <label for="cloneTargetMonth" class="form-label">Luna Țintă:</label>
                        <input type="month" id="cloneTargetMonth" class="form-input" required>
                        <p class="text-sm text-gray-500 mt-1">Luna în care se va copia programul</p>
                    </div>
                    <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3">
                        <p class="text-sm text-yellow-800 dark:text-yellow-200">
                            <strong>Atenție:</strong> Evenimentele clonate vor fi copiate pe zilele corespunzătoare (ex: prima Luni → prima Luni) și vor păstra setările de recurență. Editarea sau ștergerea evenimentelor recurente va afecta doar luna curentă, nu și celelalte luni.
                        </p>
                    </div>
                </div>

                <!-- Divider -->
                <div class="border-t border-gray-200 dark:border-gray-700 my-6"></div>

                <!-- Clear Section -->
                <div>
                    <h3 class="text-lg font-semibold mb-3 text-gray-900 dark:text-white">Șterge Toate Evenimentele</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4">Șterge toate evenimentele dintr-o lună selectată.</p>
                    <div class="form-group mb-4">
                        <label for="clearMonth" class="form-label">Luna de șters:</label>
                        <input type="month" id="clearMonth" class="form-input" required>
                        <p class="text-sm text-gray-500 mt-1">Toate evenimentele din această lună vor fi șterse</p>
                    </div>
                    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3">
                        <p class="text-sm text-red-800 dark:text-red-200">
                            <strong>⚠️ Atenție:</strong> Această acțiune este permanentă și nu poate fi anulată!
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="clearMonthBtn" class="btn btn-danger">Șterge Luna</button>
                <div style="flex: 1;"></div>
                <button id="cloneMonthCancel" class="btn btn-secondary">Anulează</button>
                <button id="cloneMonthConfirm" class="btn btn-primary">Clonează</button>
            </div>
        </div>
    </div>

    <!-- Client Modal -->
    <div id="clientModal" class="modal-backdrop">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2 id="clientModalTitle" class="modal-title">Adauga Client Nou</h2>
                <button id="closeClientModal" class="btn-icon btn-close" title="Închide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <form id="clientModalForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="clientModalFullName">Nume Complet</label>
                        <input type="text" id="clientModalFullName" name="clientFullName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="clientModalEmail">Email</label>
                        <input type="email" id="clientModalEmail" name="clientEmail" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="clientModalPhone">Telefon</label>
                        <input type="tel" id="clientModalPhone" name="clientPhone" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="clientModalBirthdayInput">Data Nasterii</label>
                        <input type="date" id="clientModalBirthdayInput" name="clientBirthdayInput" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="clientModalMedical">Alergii sau medicatie</label>
                        <textarea id="clientModalMedical" name="clientMedical" class="form-input" rows="3" placeholder="Notițe medicale, alergii, medicatie curenta..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="clientModalId">Cod Client (ID)</label>
                        <input type="text" id="clientModalId" name="clientId" class="form-input"
                               placeholder="ex: andrei2102"
                               pattern="[a-z0-9_]+"
                               title="Folosește doar litere mici si cifre">
                        <small style="color: var(--text-secondary); font-size: 0.75rem; display: block; margin-top: 0.25rem;">
                            Lasă gol pentru generare automată. Folosește format: numeddmm
                        </small>
                    </div>
                    <div class="form-group">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="clientModalIsArchived" name="clientIsArchived" style="margin-right: 0.5rem;">
                            <span>Client arhivat</span>
                        </label>
                        <small style="color: var(--text-secondary); font-size: 0.75rem; display: block; margin-top: 0.25rem;">
                            Clienții arhivați vor fi marcați distinct în listă
                        </small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="deleteClientModalBtn" type="button" class="btn btn-danger-outline">Sterge</button>
                    <div style="flex: 1;"></div>
                    <button id="cancelClientModalBtn" type="button" class="btn btn-secondary">Anuleaza</button>
                    <button type="submit" class="btn btn-primary">Salveaza</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Client Documents Modal -->
    <div id="clientDocumentsModal" class="modal-backdrop">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2 id="clientDocumentsModalTitle" class="modal-title">Documente Client</h2>
                <button id="closeClientDocumentsModal" class="btn-icon btn-close" title="Închide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="documentUploadInput" class="btn btn-primary" style=" display: inline-flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        <span style="color: white;">Incarca Document Nou</span>
                    </label>
                    <input type="file" id="documentUploadInput" accept=".pdf,.doc,.docx,image/*" style="display: none;">
                    <small style="color: var(--text-secondary); font-size: 0.75rem; display: block; margin-top: 0.5rem;">
                        Fisiere acceptate: PDF, DOC, DOCX, Imagini (JPG, PNG). Marime maxima: 2MB
                    </small>
                </div>

                <div id="documentsList" style="margin-top: 1.5rem;">
                    <h3 style="font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-primary);">Documente incarcate</h3>
                    <div id="documentsListContainer" class="modal-list">
                        <p class="empty-list-message">Nu exista documente incarcate.</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeClientDocumentsModalBtn" type="button" class="btn btn-secondary">Inchide</button>
            </div>
        </div>
    </div>

    <!-- Team Member Modal -->
    <div id="teamMemberModal" class="modal-backdrop">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2 id="teamMemberModalTitle" class="modal-title">Adauga Membru Nou</h2>
                <button id="closeTeamMemberModal" class="btn-icon btn-close" title="Închide">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <form id="teamMemberModalForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="memberModalName">Nume</label>
                        <input type="text" id="memberModalName" name="memberName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="memberModalInitials">Initiale (max 3)</label>
                        <input type="text" id="memberModalInitials" name="memberInitials" class="form-input" required maxlength="3">
                    </div>
                    <div class="form-group">
                        <label for="memberModalRole">Rol</label>
                        <select id="memberModalRole" name="memberRole" class="form-input" required>
                            <option value="therapist">Terapeut</option>
                            <option value="coordinator">Coordonator</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="memberModalColor">Culoare</label>
                        <div class="color-picker-group">
                            <input type="color" id="memberModalColor" name="memberColor" class="form-input-color" value="#4f46e5">
                            <input type="text" id="memberModalColorHex" name="memberColorHex" class="form-input" value="#4F46E5" maxlength="7">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="memberModalPassword">Parolă <span id="passwordModalLabel" style="opacity: 0.6; font-size: 0.875rem;"></span></label>
                        <input type="password" id="memberModalPassword" name="memberPassword" class="form-input" placeholder="Introduceți parola">
                        <small id="passwordModalHelp" style="display: block; margin-top: 0.5rem; opacity: 0.7;"></small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="deleteMemberModalBtn" type="button" class="btn btn-danger-outline">Sterge</button>
                    <div style="flex: 1;"></div>
                    <button id="cancelMemberModalBtn" type="button" class="btn btn-secondary">Anuleaza</button>
                    <button type="submit" class="btn btn-primary">Salveaza</button>
                </div>
            </form>
        </div>
    </div>

    <!-- (All modal HTML code from original dashboard.html should be included here) -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="js/main.js?v=3">
    
    <script type="module">
        import { openEventModal } from './js/uiService.js?v=2';
        
        // Format time ago function
        function formatTimeAgo(isoString) {
            const date = new Date(isoString);
            const seconds = Math.floor((new Date() - date) / 1000);
            let interval = seconds / 31536000;
            if (interval > 1) return Math.floor(interval) + " ani în urmă";
            interval = seconds / 2592000;
            if (interval > 1) return Math.floor(interval) + " luni în urmă";
            interval = seconds / 86400;
            if (interval > 1) return Math.floor(interval) + " zile în urmă";
            interval = seconds / 3600;
            if (interval > 1) return Math.floor(interval) + " ore în urmă";
            interval = seconds / 60;
            if (interval > 1) return Math.floor(interval) + " min în urmă";
            return "acum câteva secunde";
        }

        // Populate recent activity from database
        async function populateRecentActivity() {
            const container = document.getElementById('dashboardRecentActivity');
            if (!container) return;

            try {
                // Fetch activities and team members data
                const [activitiesResponse, dataResponse] = await Promise.all([
                    fetch('api.php?path=activities&limit=30'),
                    fetch('api.php?path=data')
                ]);

                const activitiesResult = await activitiesResponse.json();
                const data = await dataResponse.json();

                if (!activitiesResult.success || !activitiesResult.activities || activitiesResult.activities.length === 0) {
                    container.innerHTML = '<p class="text-gray-500 dark:text-gray-400 py-4 text-center">Nicio activitate recentă.</p>';
                    return;
                }

                const activityLog = activitiesResult.activities;

                // Create a user color map from team members
                const userColorMap = {};
                if (data.teamMembers && Array.isArray(data.teamMembers)) {
                    data.teamMembers.forEach(member => {
                        userColorMap[member.id] = member.color || '#6366f1'; // Default to indigo
                    });
                }

                const icons = {
                    event: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600 dark:text-gray-400"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/></svg>',
                    report: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600 dark:text-gray-400"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>',
                    evaluation: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600 dark:text-gray-400"><path d="M3 3v18h18"/><path d="M18 17V9l-5 5-4-4-6 6"/></svg>',
                    client: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600 dark:text-gray-400"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>',
                    document: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600 dark:text-gray-400"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>',
                    generic: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-gray-600 dark:text-gray-400"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>'
                };

                let html = '';
                activityLog.forEach(entry => {
                    const actionType = entry.action_type || 'generic';
                    const icon = icons[actionType] || icons.generic;
                    let actionButton = '';

                    // Get user color from map, fallback to indigo
                    const userColor = userColorMap[entry.user_id] || '#6366f1';

                    if (actionType === 'event' && entry.related_id) {
                        actionButton = `<button class="px-3 py-1.5 text-xs md:text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors whitespace-nowrap" data-action="goToDate" data-date="${entry.related_id}">Vezi Ziua</button>`;
                    } else if (actionType === 'evaluation' && entry.related_id) {
                        actionButton = `<button class="px-3 py-1.5 text-xs md:text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors whitespace-nowrap" data-action="goToClientEvolution" data-client-id="${entry.related_id}">Vezi Evoluție</button>`;
                    } else if (actionType === 'report' && entry.related_id) {
                        actionButton = `<button class="px-3 py-1.5 text-xs md:text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors whitespace-nowrap" data-action="goToClient" data-client-id="${entry.related_id}">Vezi Client</button>`;
                    } else if (actionType === 'client' && entry.related_id) {
                        actionButton = `<button class="px-3 py-1.5 text-xs md:text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors whitespace-nowrap" data-action="goToClient" data-client-id="${entry.related_id}">Vezi Client</button>`;
                    } else if (actionType === 'document' && entry.related_id) {
                        actionButton = `<button class="px-3 py-1.5 text-xs md:text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-900 dark:text-white rounded-lg transition-colors whitespace-nowrap" data-action="goToClient" data-client-id="${entry.related_id}">Vezi Client</button>`;
                    }

                    html += `
                    <div class="grid grid-cols-[auto_1fr_auto_auto] items-center gap-3 md:gap-4 py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                        <div class="w-9 h-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center flex-shrink-0">${icon}</div>
                        <div class="text-sm text-gray-700 dark:text-gray-300 overflow-hidden text-ellipsis whitespace-nowrap">
                            <strong style="color: ${userColor};">${entry.user_name}</strong> ${entry.action}: ${entry.details}
                        </div>
                        <div class="text-xs md:text-sm text-gray-500 dark:text-gray-400 flex-shrink-0 whitespace-nowrap">${formatTimeAgo(entry.created_at)}</div>
                        <div class="flex-shrink-0">${actionButton}</div>
                    </div>
                    `;
                });
                container.innerHTML = html;
            } catch (error) {
                console.error('Error loading activities:', error);
                container.innerHTML = '<p class="text-red-500 dark:text-red-400 py-4 text-center">Eroare la încărcarea activităților.</p>';
            }
        }

        // Make function globally available for refresh
        window.refreshDashboardActivities = populateRecentActivity;

        // Initialize on DOM load
        document.addEventListener('DOMContentLoaded', () => {
            populateRecentActivity();

            // Quick action buttons
            const quickAddEvent = document.getElementById('quickAddEventBtn');
            const quickAddClient = document.getElementById('quickAddClientBtn');
            const quickAddTeam = document.getElementById('quickAddTeamBtn');
            const addNewClientInModal = document.getElementById('addNewClientBtnInModal');

            if (quickAddEvent) {
                quickAddEvent.addEventListener('click', () => openEventModal(null));
            }

            if (quickAddClient) {
                quickAddClient.addEventListener('click', () => {
                    document.querySelector('.menu-item[data-view="client"]').click();
                    document.getElementById('addNewClientBtn').click();
                });
            }
            
            if (addNewClientInModal) {
                 addNewClientInModal.addEventListener('click', () => {
                    document.getElementById('closeModal').click();
                    document.querySelector('.menu-item[data-view="client"]').click();
                    document.getElementById('addNewClientBtn').click();
                });
            }

            if (quickAddTeam) {
                quickAddTeam.addEventListener('click', () => {
                    document.querySelector('.menu-item[data-view="team"]').click();
                    document.getElementById('addNewTeamMemberBtn').click();
                });
            }
            
            // Activity action buttons
            const activityContainer = document.getElementById('dashboardRecentActivity');
            
            activityContainer.addEventListener('click', (e) => {
                const button = e.target.closest('button[data-action]');
                if (!button) return;

                const action = button.dataset.action;
                
                if (action === 'goToDate') {
                    const date = button.dataset.date;
                    if (!date) return;
                    
                    import('./js/calendarState.js').then(({ calendarState }) => {
                        calendarState.setCurrentDate(new Date(date));
                        calendarState.setCurrentView('day');
                        document.querySelector('.menu-item[data-view="calendar"]').click();
                        document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                        const dayBtn = document.querySelector('.view-btn[data-view="day"]');
                        if(dayBtn) dayBtn.classList.add('active');
                    });
                }
                
                if (action === 'goToClientEvolution') {
                    const clientId = button.dataset.clientId;
                    if (!clientId) return;

                    document.querySelector('.menu-item[data-view="client"]').click();

                    import('./js/evolutionService.js').then(({ showEvolutionModal }) => {
                        // Open evolution modal and switch to Program History tab
                        showEvolutionModal(clientId, 'tabPrograme');
                    });
                }

                if (action === 'goToClient') {
                    const clientId = button.dataset.clientId;
                    if (!clientId) return;

                    document.querySelector('.menu-item[data-view="client"]').click();
                    
                    setTimeout(() => {
                        const clientCard = document.querySelector(`.client-actions[data-client-id="${clientId}"]`);
                        if(clientCard) {
                            clientCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            clientCard.closest('.client-card').style.transition = 'all 0.3s ease';
                            clientCard.closest('.client-card').style.boxShadow = '0 0 0 3px var(--accent-primary)';
                            setTimeout(() => {
                                clientCard.closest('.client-card').style.boxShadow = '';
                            }, 2000);
                        }
                    }, 200);
                }
            });
        });
    </script>



    <!-- Calendar Options Mobile Menu -->
    <div id="calendarOptionsMenu" class="calendar-options-menu">
        <div class="calendar-options-content">
            <div class="calendar-options-header">
                <h3>Opțiuni Calendar</h3>
                <button id="closeCalendarOptions" class="btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
            <div class="calendar-options-body">
                <!-- Navigation will be moved here via JavaScript -->
                <div id="mobileCalendarNav" class="calendar-option-section"></div>
                <!-- View toggle will be moved here via JavaScript -->
                <div id="mobileViewToggle" class="calendar-option-section"></div>
                <!-- Filters will be moved here via JavaScript -->
                <div id="mobileFilters" class="calendar-option-section"></div>
                <!-- Client filter will be moved here via JavaScript -->
                <div id="mobileClientFilter" class="calendar-option-section"></div>
                <!-- Action buttons will be moved here via JavaScript -->
                <div id="mobileCalendarActions" class="calendar-option-section"></div>
            </div>
        </div>
    </div>
    <div id="calendarOptionsBackdrop" class="calendar-options-backdrop"></div>

    <div id="mobileMenuBackdrop" class="mobile-menu-backdrop md:hidden"></div>
    <div id="globalLoader" class="loader-backdrop">
    <div class="loader-spinner"></div>
    <span>Se încarcă...</span>
    </div>

    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>
</body>
</html>